{% extends 'base.html' %}

{% block title %}Cadastrar Médicos - MedPass{% endblock %}

{% block header_subtitle %}
<span class="text-white/60 text-sm ml-2">/ Cadastrar Médicos</span>
{% endblock %}

{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Formulário -->
    <div class="bg-white rounded-xl shadow-md overflow-hidden">
        <div class="bg-blue-600 px-6 py-4">
            <h2 class="text-lg font-semibold text-white flex items-center">
                <i data-feather="user-plus" class="w-5 h-5 mr-2"></i>
                Novo Médico
            </h2>
        </div>
        <form method="POST" class="p-6 space-y-4">
            {% csrf_token %}
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Nome Completo *</label>
                <input type="text" name="nome" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="Dr(a). Nome Completo">
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">CRM *</label>
                    <input type="text" name="crm" required pattern="\d{4,8}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="12345">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">UF *</label>
                    <select name="uf_crm" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="MT" selected>MT</option>
                        <option value="SP">SP</option>
                        <option value="RJ">RJ</option>
                        <option value="MG">MG</option>
                        <option value="RS">RS</option>
                        <option value="PR">PR</option>
                        <option value="GO">GO</option>
                        <option value="DF">DF</option>
                        <option value="MS">MS</option>
                    </select>
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Especialidade *</label>
                <select name="especialidade" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    <option value="">Selecione...</option>
                    {% for esp in especialidades %}
                    <option value="{{ esp.id }}">{{ esp.nome }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Sala/Consultório</label>
                <input type="text" name="sala" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="101">
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefone</label>
                    <input type="text" name="telefone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="(65) 99999-9999">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">E-mail</label>
                    <input type="email" name="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="email@exemplo.com">
                </div>
            </div>
            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-colors">
                Cadastrar Médico
            </button>
        </form>
    </div>

    <!-- Lista -->
    <div class="bg-white rounded-xl shadow-md overflow-hidden">
        <div class="bg-blue-600 px-6 py-4">
            <h2 class="text-lg font-semibold text-white">Médicos Cadastrados</h2>
        </div>
        <div class="p-6 max-h-[500px] overflow-y-auto">
            {% for prof in profissionais %}
            <div class="border border-gray-200 rounded-lg p-4 mb-3 flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                        <i data-feather="user" class="w-6 h-6 text-blue-600"></i>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-800">{{ prof.nome }}</p>
                        <p class="text-sm text-gray-500">CRM {{ prof.crm }}/{{ prof.uf_crm }}</p>
                        <p class="text-xs text-blue-600">{{ prof.especialidade.nome }} {% if prof.sala %}- Sala {{ prof.sala }}{% endif %}</p>
                    </div>
                </div>
                <a href="{% url 'deletar_medico' prof.id %}" onclick="return confirm('Remover Dr(a). {{ prof.nome }}?')" class="text-red-600 hover:text-red-800 p-2">
                    <i data-feather="trash-2" class="w-5 h-5"></i>
                </a>
            </div>
            {% empty %}
            <p class="text-center text-gray-500 py-8">Nenhum médico cadastrado</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
